<div class="row vertical-spacing">
    <div class="row">
        <div class="drawing-zone base-image">
            <div class="image-container">
                <img ng-src="[[grain.grain_data.custom_data.guideImage]]" />
            </div>
            <placed-block ng-repeat="iconZone in grain.grain_data.custom_data.iconZones"
                            draggable x="textZone.position.x" y="textZone.position.y" z="iconZone.position.z">
                <image-zone>
                    <i class="close" ng-click="removeOption(grain.grain_data.custom_data, iconZone.answer)"></i>
                    <img ng-src="[[iconZone.answer]]?thumbnail=120x120" />
                    <div class="actions" ng-click="editZone(iconZone)">
                        <i class="edit"></i> Modifier
                    </div>
                </image-zone>

            </placed-block>
        </div>
    </div>
    <lightbox show="displayState.changeBackground" on-close="displayState.changeBackground = false">
        <media-library ng-model="grain.grain_data.custom_data.guideImageFile" ng-change="displayState.changeBackground = false; updateGrain();" file-format="'img'"></media-library>
    </lightbox>

    <lightbox show="displayState.editZone" on-close="displayState.editZone = false">
        <h2>Valeurs propos√©es</h2>

        <div class="row options">
            <image-zone ng-click="displayState.editedIcon.answer = option; displayState.editZone = false;" ng-repeat="option in grain.grain_data.custom_data.options track by $index">
                <i class="close" ng-click="removeOption(grain.grain_data.custom_data, option)"></i>
                <img ng-src="[[option]]?thumbnail=120x120" />
            </image-zone>
            <image-zone>
                <img skin-src="/img/illustrations/image-default.svg" ng-click="displayState.pickOption = true" />
            </image-zone>
        </div>
    </lightbox>
    <lightbox show="displayState.pickOption" on-close="displayState.pickOption = false">
        <media-library ng-model="displayState.newOption" file-format="'img'" ng-change="addOption(grain.grain_data.custom_data); displayState.pickOption = false"></media-library>
    </lightbox>
    <div class="row">
        <button class="cancel" ng-click="displayState.changeBackground = true">Modifier le fond</button>
    </div>
    <div class="row options">
        <image-zone ng-repeat="option in grain.grain_data.custom_data.options track by $index">
            <i class="close" ng-click="removeOption(grain.grain_data.custom_data, option)"></i>
            <img ng-src="[[option]]?thumbnail=120x120" />
        </image-zone>
        <image-zone>
            <img skin-src="/img/illustrations/image-default.svg" ng-click="displayState.pickOption = true" />
        </image-zone>
    </div>
</div>
