<!-- teacher-dashboard-simple-correction-copy-list -->
<div class="row">
     <div class="cell">
          <h2> [[selectedSubjectScheduled.title]]</h2>
     </div>
     <div class="cell">
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
     </div>
     <div class="cell">
          <h4> Commence le [[ selectedSubjectScheduled.begin_date | date:'dd/MM/yyyy' ]], pour le [[ selectedSubjectScheduled.due_date | date:'dd/MM/yyyy' ]]</h4>
     </div>
     <div class="cell right-magnet">
          <button data-ng-click="clickReturnSubjectScheduledList()" class="right-magnet cancel">
               Retour
          </button>
     </div>
</div>

<div class="row">
     <div class="cell">
          <h2> Corrigé du devoir (publié le [[ selectedSubjectScheduled.corrected_date | date:'dd/MM/yyyy' ]])</h2>
     </div>
     <div class="cell">
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
     </div>
     <div class="three cell">
          <div class="twelve cell horizontal-spacing select-file input-block" style="margin-top:5px;margin-bottom:5px">
               <input style="width:70% !important" ng-readonly="true" type="text" ng-model="selectedSubjectScheduled.corrected_metadata.filename" data-display-file class="nomargin" />
               <div class="hidden-content">
                    <input type="file" style="z-index:-1" files-input-change="saveCorrected(this)"  ng-model="newFiles" />
               </div>
               <button class="file-button flat-button"><i18n>exercizer.import.choose</i18n></button>
          </div>
     </div>
     <div class="cell" data-ng-if="selectedSubjectScheduled.corrected_file_id" data-tooltip="Supprimer le corrigé"  style="margin-top:5px;margin-bottom:5px">
          <button class="flat-button" data-ng-click="removeCorrected()"><i class="close-2x"  style=""></i></button>
     </div>
     <div class="two cell select-file hidden-content">
          <div class="hidden-content">
               <input type="file" files-input-change="saveCurrentCorrected(this)"  ng-model="newFiles" />
          </div>
          <button id="currentUpload" class="file-button"><i18n>exercizer.import.choose</i18n></button>
     </div>
</div>

<div class="row vertical-spacing">
     <div class="cell">
          <span data-ng-repeat="user in selectedSubjectScheduled.scheduled_at.userList"
                style="font-weight: bold;font-size: large;">
               [[user.name]] -
          </span>
          <span data-ng-repeat="group in selectedSubjectScheduled.scheduled_at.groupList"
                style="font-weight: bold;font-size: large;">
               [[group.name]] -
          </span>
     </div>
     <div class="cell">
          &nbsp;
     </div>
     <div class="cell">
          Date limite de rendu le [[ selectedSubjectScheduled.due_date | date:'dd/MM/yyyy' ]]
     </div>
     <div class="cell right-magnet">
          [[numberCopySubmitted()]] élève(s) sur [[subjectCopyList.length]] ont rendu le devoir
     </div>

</div>

<div class="row vertical-spacing">
     <input type="text" class="twelve cell" data-ng-model="search.owner.owner_username" placeholder="Rechercher un élève">
</div>
<form name="formCopyTest" >
     <div class="row vertical-spacing">
          <table class="list-view">
               <thead>
               <tr>
                    <th class="one centered-text"><input type="checkbox" data-ng-model="selectAll" data-ng-click="clickSelectAll(selectAll)"/></th>
                    <th scope="col" ng-click="orderByField('owner_username')">
                         <span translate content="Devoir de" ></span>
                         <i class="sort" ng-if="order.field !== 'owner_username'"></i>
                         <i class="sort-asc" ng-if="order.field === 'owner_username' && !order.desc"></i>
                         <i class="sort-desc" ng-if="order.field === 'owner_username' && order.desc"></i>
                    </th>
                    <th scope="col" ng-click="orderByField('submitted_date')">
                         <span translate content="Date de rendu" ></span>
                         <i class="sort" ng-if="order.field !== 'submitted_date'"></i>
                         <i class="sort-asc" ng-if="order.field === 'submitted_date' && !order.desc"></i>
                         <i class="sort-desc" ng-if="order.field === 'submitted_date' && order.desc"></i>
                    </th>
                    <th scope="col" ng-click="orderByField('homework_metadata.filename')">
                         <span translate content="Fichier" ></span>
                         <i class="sort" ng-if="order.field !== 'homework_metadata.filename'"></i>
                         <i class="sort-asc" ng-if="order.field === 'homework_metadata.filename' && !order.desc"></i>
                         <i class="sort-desc" ng-if="order.field === 'homework_metadata.filename' && order.desc"></i>
                    </th>
                    <th scope="col" ng-click="orderByField('corrected_metadata.filename')">
                         <span translate content="Correction individuelle" ></span>
                         <i class="sort" ng-if="order.field !== 'corrected_metadata.filename'"></i>
                         <i class="sort-asc" ng-if="order.field === 'corrected_metadata.filename' && !order.desc"></i>
                         <i class="sort-desc" ng-if="order.field === 'corrected_metadata.filename' && order.desc"></i>
                    </th>
               </tr>
               </thead>
               <tbody>
               <tr data-ng-repeat="copy in subjectCopyList | filter:search.owner | orderBy:order.order:order.desc" ng-class="{ checked: copy.selected }">
                    <td class="centered-text">
                         <input type="checkbox" data-ng-model="copy.selected" data-ng-click="selectCopy()"/>
                    </td>
                    <td>
                         <span>[[copy.owner_username]]</span>

                    </td>

                    <td>
                         <!-- DONE Lauren -->

                         <div data-ng-if="tooLate(copy)" class="alert">
                             <i class="timer-off"></i> &nbsp; Retard <span class="warning-text">[[copy.submitted_date | date:'dd/MM/yyyy']]</span>
                         </div>

                         <div data-ng-if="copy.submitted_date" class="valid-color">
                             <i class="check-circle"></i> &nbsp;<em>[[copy.submitted_date | date:'dd/MM/yyyy']]</em>
                         </div>

                         <div data-ng-if="showReminder(copy)" class="flex-row flex-center">
                            <i class="pending-action horizontal-spacing medium-text"></i>
                            <button data-ng-click="reminder(copy.id)" class="flat-button no-margin"><i18n>Rappel</i18n></button>
                         </div>
                    </td>
                    <td>
                        <span data-ng-if="copy.homework_metadata">
                            <i ng-class="{'mail-in': copy.selected, 'attachment': !copy.selected}" class="medium-text"></i>
                            <a data-ng-click="downloadFile(copy)">
                                &nbsp; [[copy.homework_metadata.filename]]
                            </a>
                        </span>
                    </td>
                    <td>
                         <div ng-if="!copy.corrected_metadata.filename && copy.submitted_date"
                            class="droppable centered-text block-container flex-row flex-center justify-center"
                            drop-files="newFiles"
                            on-drop="selectedCorrectedFileCopy(copy);saveCurrentCorrected(this);">

                                <i class="mail-out"></i>&nbsp;&nbsp;

                                <a data-ng-click="selectedCorrectedFileCopy(copy)"
                                    onclick="$(currentUpload).click();">
                                    <i18n>Ajouter un fichier</i18n>
                                </a>
                         </div>
                         <span ng-if="copy.corrected_metadata.filename">
                             <i class="attachment medium-text"></i>&nbsp;&nbsp;
                             [[copy.corrected_metadata.filename]]&nbsp;
                             <i data-ng-click="removeCurrentCorrected(copy)" class="close"></i>
                         </span>
                    </td>
               </tr>
               </tbody>
          </table>
     </div>
</form>

<section class="toggle-buttons" data-ng-show="toasterDisplayed">
     <div class="toggle">
          <div class="row">
               <div class="cell">
                    <button data-ng-click="downloadFiles()">Télécharger la sélection</button>
               </div>
               <div class="cell">
                    <button data-ng-click="reminder()">Rappel aux non-rendus</button>
               </div>
          </div>
     </div>
</section>
<reminders is-displayed="reminderDisplayed" selected-subject-scheduled="selectedSubjectScheduled" reminder-copies="reminderCopies" />
