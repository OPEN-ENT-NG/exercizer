<div data-ng-controller="ViewSubjectCopyController as viewSubjectCopyController" guard-root>

    <!-- LOADER -->
    <div class="row" data-ng-hide="viewSubjectCopyController.hasDataLoaded">
        <div class="info"><i18n>exercizer.loading</i18n></div>
    </div>

    <div data-ng-if="viewSubjectCopyController.hasDataLoaded && viewSubjectCopyController.grainCopyList.length > 0">

        <!-- PREVIEW HEADER -->
        <div data-ng-if="viewSubjectCopyController.previewing">
            <subject-view-copy-preview-header data-subject-scheduled="viewSubjectCopyController.subjectScheduled"
                                              data-previewing-from-library="viewSubjectCopyController.previewingFromLibrary"
                                              data-subject-copy="viewSubjectCopyController.subjectCopy">
            </subject-view-copy-preview-header>
        </div>

        <!-- TEACHER HEADER -->
        <div data-ng-if="!viewSubjectCopyController.previewing && viewSubjectCopyController.isTeacher">
           <subject-view-copy-teacher-actions data-subject-scheduled="viewSubjectCopyController.subjectScheduled"
                                             data-subject-copy="viewSubjectCopyController.subjectCopy"
                                             data-header="true">
           </subject-view-copy-teacher-actions>
        </div>

        <!-- STUDENT HEADER -->
        <div data-ng-if="!viewSubjectCopyController.previewing && !viewSubjectCopyController.isTeacher">
            <subject-view-copy-student-header data-subject-scheduled="viewSubjectCopyController.subjectScheduled"
                                              data-subject-copy="viewSubjectCopyController.subjectCopy">
            </subject-view-copy-student-header>
        </div>

        <div class="grid grid-layout-2">
            <!-- LEFT NAV -->
            <aside class="sticky-nav side-nav only-large-desktop">
                <subject-copy-left-nav data-anchor-behaviour="true"
                                       data-grain-copy-list="viewSubjectCopyController.grainCopyList">
                </subject-copy-left-nav>
            </aside>

            <section>
                <div class="m-16">
                    <message-info
                        status="info"
                        data-ng-if="viewSubjectCopyController._isTeacher && !viewSubjectCopyController._previewing && !viewSubjectCopyController._previewingFromLibrary">
                        <i18n>exercizer.correction.warning</i18n>
                    </message-info>
                </div>
                <!-- GRAIN COPY LIST -->
                <subject-view-copy-grain-copy-list data-subject-scheduled="viewSubjectCopyController.subjectScheduled"
                                                   data-subject-copy="viewSubjectCopyController.subjectCopy"
                                                   data-grain-scheduled-list="viewSubjectCopyController.grainScheduledList"
                                                   data-grain-copy-list="viewSubjectCopyController.grainCopyList"
                                                   data-is-teacher="viewSubjectCopyController.isTeacher">
                </subject-view-copy-grain-copy-list>
            </section>
        </div>

        <div data-ng-if="!viewSubjectCopyController.previewing && viewSubjectCopyController.isTeacher">
            <subject-view-copy-teacher-actions data-subject-scheduled="viewSubjectCopyController.subjectScheduled"
                                          data-subject-copy="viewSubjectCopyController.subjectCopy" data-header="false" />
        </div>

        <div class="back-to-top" onclick='jQuery("html, body").animate({ scrollTop: "0px" }, 500);' style="z-index: 9000;"></div>
    </div>

    <!-- NO DATA -->
    <div class="row" data-ng-if="viewSubjectCopyController.hasDataLoaded && viewSubjectCopyController.grainCopyList.length === 0">
        <!-- PREVIEW HEADER -->
        <div data-ng-if="viewSubjectCopyController.previewing">
            <subject-view-copy-preview-header data-subject-scheduled="viewSubjectCopyController.subjectScheduled"
                                              data-previewing-from-library="viewSubjectCopyController.previewingFromLibrary">
            </subject-view-copy-preview-header>
        </div>

        <!-- TEACHER HEADER -->
        <div data-ng-if="!viewSubjectCopyController.previewing && viewSubjectCopyController.isTeacher">
            <subject-view-copy-teacher-actions data-subject-scheduled="viewSubjectCopyController.subjectScheduled"
                                              data-subject-copy="viewSubjectCopyController.subjectCopy"
                                              data-header="true">
            </subject-view-copy-teacher-actions>
        </div>

        <!-- STUDENT HEADER -->
        <div data-ng-if="!viewSubjectCopyController.previewing && !viewSubjectCopyController.isTeacher">
            <subject-view-copy-student-header data-subject-scheduled="viewSubjectCopyController.subjectScheduled"
                                              data-subject-copy="viewSubjectCopyController.subjectCopy">
            </subject-view-copy-student-header>
        </div>

        <div class="warning"><i18n>exercizer.subject.empty</i18n></div>
    </div>
    <lightbox class="alertchange" data-show="viewSubjectCopyController.shouldShowNavigationAlert" data-delegate-close="viewSubjectCopyController.canCloseNavigationAlert()" data-tiny="true">
        <p class="centered-text"><i18n>exercizer.subject.navigation.saving</i18n></p>
        <div class="row centered-text bottom-spacing-three">
            <i class="loading"></i>
        </div>
    </lightbox>

</div>