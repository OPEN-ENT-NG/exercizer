<div data-ng-controller="TeacherDashboardController as teacherDashboardController">

    <!-- LIGHT BOX -->
    <lightbox-subject-properties
            data-is-displayed="teacherDashboardController.openLightboxSubjectProperties"
    ></lightbox-subject-properties>
    <lightbox-edit-folder></lightbox-edit-folder>
    <lightbox-schedule-subject></lightbox-schedule-subject>
    <lightbox-delete-selection></lightbox-delete-selection>
    <!-- PAGE -->
    <div class="row">
        <h1>
            Exercizer
        </h1>
    </div>
    <div class="row twelve cell tabs">
        <div class="cell">
            <header class="selected">
                Mes sujets
            </header>
            <header>
                Bibliothèque
            </header>
        </div>
        <button class="right-magnet cell" data-ng-click="teacherDashboardController.displaySubjectProperties()">
            Nouveau sujet
        </button>
    </div>
    <div class="row rigid-grid">
        <!-- navigation -->
        <section class="four cell">
            <nav class="vertical dragging-zone-folder">
                <ul>
                    <li>
                        <a  class="selected"
                            data-ng-click="teacherDashboardController.goToRoot()"
                            dragdrop="dropToRoot($originalEvent)"
                        >
                            Mes sujets
                        </a>
                        <div data-ng-repeat="item in  teacherDashboardController.folderList() | orderObjectBy:'label':false" >
                            <folder-item   item = "item" is-root = "true" parent-id="parentId"></folder-item>
                        </div>
                    </li>
                </ul>
                <a class="classic-link" data-ng-click="teacherDashboardController.clickCreateFolder()">
                    Créer un nouveau dossier
                </a>
            </nav>
        </section>
        <!-- main page -->
        <section class="margin-four">
            <nav class="twelve cell">
                <div class="cell right-magnet">
                    <i data-ng-click="teacherDashboardController.displayList = 'array'"
                       class="show-list"
                       data-ng-class="{selected: teacherDashboardController.displayList == 'array'}"

                    ></i>
                    <i data-ng-click="teacherDashboardController.displayList = 'domino'"
                       class="show-icons"
                       data-ng-class="{selected: teacherDashboardController.displayList == 'domino'}"

                    ></i>
                </div>
            </nav>
            <!-- domino part -->
            <div class="twelve cell" data-ng-show="teacherDashboardController.displayList == 'domino'">
                <div class="fallen dominos">
                    <!-- folder part -->
                    <div data-ng-repeat="folder in teacherDashboardController.folderList()">
                        <div class="item" data-ng-if="teacherDashboardController.filterFolderByParentFolder(folder)">
                            <section class="domino">
                                <div
                                        class="top"
                                        style="padding-top : 10%;"
                                        dragstart="teacherDashboardController.drag(folder, $originalEvent)"
                                        dragcondition="teacherDashboardController.dragFolderCondition(folder)"
                                        dragdrop="teacherDashboardController.dropTo(folder, $originalEvent)"
                                        dropcondition="teacherDashboardController.dropFolderCondition(folder)"
                                >
                                    <a class="container">
                                        <i class="folder-large"></i>
                                    </a>
                                </div>
                                <div class="bottom">
                                    <div class="content">
                                        <div class="cell">
                                            <strong data-ng-click="teacherDashboardController.clickOnFolderTitle(folder)">[[folder.label]]</strong>
                                            <br />
                                            <br />
                                        </div>
                                        <div data-ng-show="teacherDashboardController.canManageFolder()" class="bottom-locked eleven vertical-spacing-twice">
                                            <input  type="checkbox" data-ng-model="folder.selected" class="right-magnet cell" data-ng-change="teacherDashboardController.selectFolder(folder)"/>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
                    <!-- subject part -->
                    <div data-ng-repeat="subject in teacherDashboardController.subjectList()">
                        <div  class="item"  data-ng-if="teacherDashboardController.filterSubjectByParentFolder(subject)" >
                            <section class="domino">
                                <div
                                        class="top"
                                        dragstart="teacherDashboardController.drag(subject, $originalEvent)"
                                        dragcondition="teacherDashboardController.dragSubjectCondition(subject)"
                                        dragdrop="teacherDashboardController.dropTo(subject, $originalEvent)"
                                        dropcondition="dropSubjectCondition.dropCondition(subject)"
                                >
                                    <img class="absolute" data-ng-src="[[teacherDashboardController.getSubjectPicture(subject)]]" />
                                </div>
                                <div class="bottom">
                                    <div class="content">
                                        <div class="cell">
                                            <strong data-ng-click="teacherDashboardController.clickOnSubjectTitle()">[[subject.title]]</strong>
                                            <br />
                                            <span>[[getSubjectModificationDate()]]</span>
                                            <br />
                                        </div>
                                        <div data-ng-show="teacherDashboardController.canManageSubject()" class="bottom-locked eleven vertical-spacing-twice">
                                            <input type="checkbox" data-ng-model="subject.selected" class="right-magnet cell" data-ng-change="teacherDashboardController.selectSubject(subject)"/>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>

                </div>
            </div>

            <!-- array part -->
            <div class="twelve cell" data-ng-show="teacherDashboardController.displayList == 'array'">
                <table class="list-view">
                    <thead>
                    <tr>
                        <th scope="col" class="icon">
                            <input type="checkbox" data-ng-click="" data-ng-model="teacherDashboardController.selectAll"  />
                        </th>
                        <!-- icon folder -->
                        <th><i class="drag-anchor"></i></th>
                        <th scope="col">
                            <span>Nom</span>
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    <!-- folder list-->
                    <tr data-ng-repeat="folder in teacherDashboardController.folderList()">
                        <td data-ng-if="teacherDashboardController.filterFolderByParentFolder(folder)">
                            <input type="checkbox" data-ng-model="item.selected"/>
                        </td>
                        <td     dragstart="drag(getItem(), $originalEvent)"
                                dragcondition="dragCondition(getItem())"
                                dragdrop="dropTo(getItem(), $originalEvent)"
                                dropcondition="dropCondition(getItem())"
                                data-ng-if="teacherDashboardController.filterFolderByParentFolder(folder)">
                            <i class="folder"></i>
                        </td>
                        <td data-ng-if="teacherDashboardController.filterFolderByParentFolder(folder)">
                            <a data-ng-click="clickOnTitle()">[[folder.label]]</a>
                        </td>
                    </tr>
                    <!-- subject  list -->
                    <tr data-ng-repeat="subject in teacherDashboardController.subjectList()">
                        <td data-ng-if="teacherDashboardController.filterSubjectByParentFolder(subject)">
                            <input type="checkbox" data-ng-model="item.selected"/>
                        </td>
                        <td     dragstart="drag(getItem(), $originalEvent)"
                                dragcondition="dragCondition(getItem())"
                                dragdrop="dropTo(getItem(), $originalEvent)"
                                dropcondition="dropCondition(getItem())"
                                data-ng-if="teacherDashboardController.filterSubjectByParentFolder(subject)">
                            <i class="pdf"></i>
                        </td>
                        <td data-ng-if="teacherDashboardController.filterSubjectByParentFolder(subject)">
                            <a data-ng-click="clickOnTitle()">[[subject.title]]</a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </section>
    </div>
    <toaster></toaster>
</div>