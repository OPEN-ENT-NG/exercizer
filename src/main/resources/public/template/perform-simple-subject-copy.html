<div data-ng-controller="PerformSimpleSubjectCopyController as performSimpleSubjectCopyController">

    <!-- LOADER -->
    <div class="row" data-ng-hide="performSimpleSubjectCopyController.hasDataLoaded">
        <div class="info"><i18n>exercizer.loading</i18n></div>
    </div>

    <div data-ng-if="performSimpleSubjectCopyController.hasDataLoaded">

        <div class="row">
            <h1 class="cell">
                <span class="no-responsive"><span class="hover-orange" data-ng-click="performSimpleSubjectCopyController.redirectToDashboard()"><i18n>exercizer.title</i18n></span> / </span><span class="hover-orange" data-ng-click="">[[ performSimpleSubjectCopyController.subjectScheduled.title | limitTo: 35  ]][[ performSimpleSubjectCopyController.subjectScheduled.title.length > 35 ? '...' : '']]</span>
            </h1>

            <button class="right-magnet cell" data-ng-if="performSimpleSubjectCopyController.canHomeworkSubmit()" data-ng-click="performSimpleSubjectCopyController.openConfirmModal()">
                <i18n>exercizer.simple.submit</i18n>
            </button>

            <button class="right-magnet cell flat-button" data-ng-click="performSimpleSubjectCopyController.redirectToDashboard()">
                <i18n>exercizer.back</i18n>
            </button>
        </div>

        <article class="row">
            <form name="formSubjectProperties">
                <div class="flex-row f-column gap-16">
                    <h2 class="text-heading mb-0">[[performSimpleSubjectCopyController.subjectScheduled.title]]</h2>
                    <div class="flex-row f-column gap-8">
                        <h2 class="text-subheading mb-0"><i18n>exercizer.simple.edit.description</i18n></h2>
                        <div class="text-body text-light" style="word-wrap: break-word;" bind-html="performSimpleSubjectCopyController.subjectScheduled.description"></div>
                    </div>
                </div>
            </form>
        </article>
        <article class="flex-row f-column">
            <h2 class="text-subheading mt-0 mb-16"><i18n>exercizer.simple.make.title</i18n></h2>
            <!--REPLACE-->  
            <div ng-if="performSimpleSubjectCopyController.canHomeworkReplace()"> 
                <div class="selected-subject-scheduled px-12" drop-files="performSimpleSubjectCopyController.newFiles" on-drop="performSimpleSubjectCopyController.setCurrentFileName()">
                    <svg class="icon-attachement" width="16" height="16"><use href="exercizer/public/assets/icons/icons.svg#attachement"></use></svg>
                    <label class="text-pointer text-lighter">[[performSimpleSubjectCopyController.subjectCopy.homework_metadata.filename]]
                        <input style="display:none" type="file" style="z-index:-1" files-input-change="performSimpleSubjectCopyController.setCurrentFileName()"  ng-model="performSimpleSubjectCopyController.newFiles" />
                    </label>
                    <button
                        class="download"
                        aria-label="[['exercizer.file.download'|i18n]]"
                        data-ng-click="performSimpleSubjectCopyController.downloadFile($event)"
                        target="_blank">
                        <svg class="icon-download" width="20" height="20"><use href="exercizer/public/assets/icons/icons.svg#download"></use></svg>
                    </button>
                </div>
            </div>
            <!--ADD-->
            <div data-ng-if="performSimpleSubjectCopyController.canHomeworkSubmit()"
                class="cell select-file input-block align-center" style="margin-top:5px; margin-bottom:5px">
                <div ng-if="!performSimpleSubjectCopyController.canHomeworkReplace()">
                    <div class="block-select-copy">
                        <div drop-files="performSimpleSubjectCopyController.newFiles"
                            on-drop="performSimpleSubjectCopyController.setCurrentFileName()"
                            class="droppable flex-row align-center simple-drop horizontal-spacing" style="width: 25%">
                                <i ng-class="{'upload': !performSimpleSubjectCopyController.subjectCopy.homework_metadata.filename, 'attachment': performSimpleSubjectCopyController.subjectCopy.homework_metadata.filename}"
                                    class="horizontal-spacing medium-text"></i>
                                <input ng-readonly="true" type="text"
                                    ng-model="performSimpleSubjectCopyController.subjectCopy.homework_metadata.filename"
                                    data-display-file
                                    class="no-margin"
                                    style="width: 100%!important; border: none;"
                                    i18n-placeholder="exercizer.simple.upload.drag" />
                                <i ng-class="{
                                    loaded: performSimpleSubjectCopyController.subjectCopy.homework_metadata.filename}">
                                </i>
                        </div>
                        <button class="file-button flat-button no-margin simple-button" style="width: 30%;">
                            <i18n>exercizer.simple.upload.choose</i18n>
                        </button>
                    </div>
                    <em class="helper-text"><i18n>exercizer.limit.exceed</i18n></em>
                    <div class="hidden-content">
                        <input type="file" style="z-index:-1" files-input-change="performSimpleSubjectCopyController.setCurrentFileName()"  ng-model="performSimpleSubjectCopyController.newFiles" />
                    </div>
                </div>
            </div>
            <!--VIEW-->
            <div ng-if="performSimpleSubjectCopyController.canHomeworkOnlyView()" data-ng-click="performSimpleSubjectCopyController.downloadFile($event)"> 
                <div class="selected-subject-scheduled px-12">
                    <svg class="icon-attachement" width="16" height="16"><use href="exercizer/public/assets/icons/icons.svg#attachement"></use></svg>
                    <label class="text-pointer text-lighter">[[performSimpleSubjectCopyController.subjectCopy.homework_metadata.filename]]</label>
                    <button
                        class="download"
                        aria-label="[['exercizer.file.download'|i18n]]"
                        data-ng-click="performSimpleSubjectCopyController.downloadFile($event)"
                        target="_blank">
                        <svg class="icon-download" width="20" height="20"><use href="exercizer/public/assets/icons/icons.svg#download"></use></svg>
                    </button>
                </div>
            </div>
            <div data-ng-if="performSimpleSubjectCopyController.canShowFuturSubmitLabel()">
                <p class="info tuto">
                    <span>
                        <i18n>exercizer.future.info</i18n>
                        <b> [[performSimpleSubjectCopyController.subjectScheduled.begin_date | date:'dd/MM/yyyy']]
                            <i18n>exercizer.at</i18n> [[performSimpleSubjectCopyController.subjectScheduled.begin_date | date:'HH:mm']]
                        </b>
                    </span>
                </p>
            </div>
        </article>
        <div class="flex-row gap-24">
            <article class="six flex-row f-column gap-8" data-ng-if="performSimpleSubjectCopyController.canShowGeneralCorrected()">
                <h2 class="text-subheading mb-0"><i18n>exercizer.simple.corrected</i18n></h2>
                <div class="text-body text-lighter">
                    <div class="selected-subject-scheduled px-12" ng-if="performSimpleSubjectCopyController.canDownloadCorrected()" data-ng-click="performSimpleSubjectCopyController.downloadGeneralCorrectedFile()">
                        <svg class="icon-attachement" width="16" height="16"><use href="exercizer/public/assets/icons/icons.svg#attachement"></use></svg>
                        <label class="text-pointer">[[performSimpleSubjectCopyController.subjectScheduled.corrected_metadata.filename]]</label>
                        <button
                            class="download"
                            aria-label="[['exercizer.file.download'|i18n]]"
                            data-ng-click="performSimpleSubjectCopyController.downloadGeneralCorrectedFile()"
                            target="_blank">
                            <svg class="icon-download" width="20" height="20"><use href="exercizer/public/assets/icons/icons.svg#download"></use></svg>
                        </button>
                    </div>
                    <label data-ng-if="!performSimpleSubjectCopyController.canDownloadCorrected()">
                        <i18n>exercizer.simple.consult.corrected</i18n> [[performSimpleSubjectCopyController.subjectScheduled.corrected_date | date:'dd/MM/yyyy']]
                        <i18n>exercizer.at</i18n> [[performSimpleSubjectCopyController.subjectScheduled.corrected_date | date:'HH:mm']]
                    </label>
                </div>
            </article>
            <article class="six flex-row f-column gap-8" data-ng-if="performSimpleSubjectCopyController.canShowIndividualCorrected()">
                <h2 class="text-subheading mb-0"><i18n>exercizer.simple.individual.corrected</i18n></h2>
                <div class="text-body text-lighter">
                    <div class="selected-subject-scheduled px-12" ng-if="performSimpleSubjectCopyController.canDownloadCorrected()" data-ng-click="performSimpleSubjectCopyController.downloadCorrectedFile()">
                        <svg class="icon-attachement" width="16" height="16"><use href="exercizer/public/assets/icons/icons.svg#attachement"></use></svg>
                        <label class="text-pointer">[[performSimpleSubjectCopyController.subjectCopy.corrected_metadata.filename]]</label>
                        <button
                            class="download"
                            aria-label="[['exercizer.file.download'|i18n]]"
                            data-ng-click="performSimpleSubjectCopyController.downloadCorrectedFile($event)"
                            target="_blank">
                            <svg class="icon-download" width="20" height="20"><use href="exercizer/public/assets/icons/icons.svg#download"></use></svg>
                        </button>
                    </div>
                    <label data-ng-if="!performSimpleSubjectCopyController.canDownloadCorrected()">
                        <i18n>exercizer.simple.consult.corrected</i18n> [[performSimpleSubjectCopyController.subjectScheduled.corrected_date | date:'dd/MM/yyyy']]
                        <i18n>exercizer.at</i18n> [[performSimpleSubjectCopyController.subjectScheduled.corrected_date | date:'HH:mm']]
                    </label>
                </div>
            </article>
        </div>
        <!-- Modal confirmation -->
        <lightbox data-show="performSimpleSubjectCopyController.isModalConfirmDisplayed" on-close="performSimpleSubjectCopyController.closeConfirmModal()">
            <h2><i18n>exercizer.simple.make.label</i18n> [[performSimpleSubjectCopyController.subjectScheduled.title | limitTo: 35  ]][[ performSimpleSubjectCopyController.subjectScheduled.title.length > 35 ? '...' : '']]</h2>

            <p><i18n>exercizer.simple.make.confirm</i18n> <em>[[ performSimpleSubjectCopyController.subjectScheduled.title ]]</em> <i18n>exercizer.to</i18n> <strong>[[ performSimpleSubjectCopyController.subjectScheduled.owner_username ]]</strong> ?</p>

            <div class="row">
                <button data-ng-click="performSimpleSubjectCopyController.saveStudentCopy()" class="cell right-magnet"><i18n>exercizer.simple.make.label</i18n></button>
                <button data-ng-click="performSimpleSubjectCopyController.closeConfirmModal()" class="cell right-magnet cancel"><i18n>exercizer.simple.make.cancel</i18n></button>
            </div>
        </lightbox>

    </div>
</div>
